---
title: æ¦‚è¿°
description: äº†è§£AgentSDKçš„æ ¸å¿ƒä»·å€¼å’Œè®¾è®¡ç†å¿µ
---

# AgentSDK æ¦‚è¿°

AgentSDK æ˜¯ä¸€ä¸ªä¸ºç”Ÿäº§ç¯å¢ƒè®¾è®¡çš„ **Goè¯­è¨€AI Agentå¼€å‘æ¡†æ¶**ã€‚å®ƒæä¾›äº†ä¼ä¸šçº§çš„Agentè¿è¡Œæ—¶ï¼Œæ”¯æŒäº‹ä»¶é©±åŠ¨ã€äº‘ç«¯æ²™ç®±ã€å®‰å…¨å¯æ§ç­‰ç‰¹æ€§ã€‚

## ğŸ¯ è®¾è®¡ç›®æ ‡

AgentSDKçš„è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒåŸåˆ™ï¼š

### 1. ç”Ÿäº§å°±ç»ª

- **é«˜æ€§èƒ½å¹¶å‘**ï¼šåŸºäºGo goroutineï¼Œæ”¯æŒ100+å¹¶å‘Agent
- **äº‘ç«¯æ²™ç®±**ï¼šåŸç”Ÿæ”¯æŒé˜¿é‡Œäº‘ã€ç«å±±å¼•æ“ç­‰äº‘å¹³å°
- **æ–­ç‚¹æ¢å¤**ï¼š7æ®µæ–­ç‚¹æœºåˆ¶ï¼Œä¼šè¯ä¸­æ–­åå¯æ— ç¼æ¢å¤
- **å¯è§‚æµ‹æ€§**ï¼šå®Œæ•´çš„äº‹ä»¶å®¡è®¡ã€Tokenç»Ÿè®¡ã€å·¥å…·æ‰§è¡Œè¿½è¸ª

### 2. æ¶æ„æ¸…æ™°

- **äº‹ä»¶é©±åŠ¨**ï¼šProgress/Control/Monitorä¸‰é€šé“åˆ†ç¦»å…³æ³¨ç‚¹
- **æ´‹è‘±æ¨¡å‹**ï¼šä¸­é—´ä»¶æ ˆå®ç°åŠŸèƒ½çš„æ¸…æ™°åˆ†å±‚
- **ä¾èµ–æ³¨å…¥**ï¼šä¾¿äºæµ‹è¯•å’Œæ‰©å±•çš„ç»„ä»¶åŒ–è®¾è®¡
- **æ¥å£ä¼˜å…ˆ**ï¼šçµæ´»çš„æŠ½è±¡å±‚è®¾è®¡

### 3. å®‰å…¨å¯æ§

- **æ²™ç®±éš”ç¦»**ï¼šæ‰€æœ‰ä»£ç æ‰§è¡Œåœ¨å—é™ç¯å¢ƒ
- **æƒé™ç­–ç•¥**ï¼šå·¥å…·çº§åˆ«çš„allow/deny/aské…ç½®
- **Hookç³»ç»Ÿ**ï¼šç”Ÿå‘½å‘¨æœŸæ‹¦æˆªå’Œå®¡è®¡
- **å®¡è®¡æ—¥å¿—**ï¼šå®Œæ•´çš„æ“ä½œè®°å½•

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ äº‹ä»¶é©±åŠ¨æ¶æ„

AgentSDKé‡‡ç”¨ä¸‰é€šé“äº‹ä»¶ç³»ç»Ÿï¼Œæ¸…æ™°åˆ†ç¦»ä¸åŒç±»å‹çš„æ•°æ®æµï¼š

- **Progressé€šé“**ï¼šæµå¼è¾“å‡ºã€å·¥å…·æ‰§è¡Œè¿›åº¦
- **Controlé€šé“**ï¼šå·¥å…·å®¡æ‰¹è¯·æ±‚ã€äººæœºäº¤äº’
- **Monitoré€šé“**ï¼šæ²»ç†äº‹ä»¶ã€é”™è¯¯ã€å®¡è®¡æ—¥å¿—

```go
// è®¢é˜…ä¸åŒé€šé“
eventCh := ag.Subscribe([]types.AgentChannel{
    types.ChannelProgress,  // UIå±•ç¤º
    types.ChannelMonitor,   // ç›‘æ§å‘Šè­¦
}, nil)

for envelope := range eventCh {
    switch e := envelope.Event.(type) {
    case *types.ProgressTextChunkEvent:
        // å¤„ç†æµå¼æ–‡æœ¬
    case *types.MonitorErrorEvent:
        // å¤„ç†é”™è¯¯äº‹ä»¶
    }
}
```

### ğŸ§… æ´‹è‘±æ¨¡å‹ä¸­é—´ä»¶

åŸºäºæ´‹è‘±æ¨¡å‹çš„ä¸­é—´ä»¶æ ˆï¼Œæ”¯æŒè¯·æ±‚å’Œå“åº”çš„åŒå‘æ‹¦æˆªï¼š

```go
// å¯ç”¨å†…ç½®ä¸­é—´ä»¶
ag, err := agent.Create(ctx, &types.AgentConfig{
    Middlewares: []string{
        "filesystem",     // æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
        "subagent",       // å­Agentå§”æ´¾
        "summarization",  // è‡ªåŠ¨æ€»ç»“
    },
}, deps)
```

ä¸­é—´ä»¶ç‰¹æ€§ï¼š

- **ä¼˜å…ˆçº§æ§åˆ¶**ï¼šæ•°å€¼è¶Šå¤§è¶Šå¤–å±‚
- **åŒå‘æ‹¦æˆª**ï¼šWrapModelCall + WrapToolCall
- **çŠ¶æ€éš”ç¦»**ï¼šæ¯ä¸ªä¸­é—´ä»¶ç‹¬ç«‹ç®¡ç†çŠ¶æ€
- **æ˜“äºæ‰©å±•**ï¼šå®ç°æ¥å£å³å¯è‡ªå®šä¹‰

### ğŸ›¡ï¸ äº‘ç«¯æ²™ç®±æ‰§è¡Œ

æ”¯æŒå¤šç§æ²™ç®±åç«¯ï¼Œç¡®ä¿ä»£ç æ‰§è¡Œå®‰å…¨ï¼š

| æ²™ç®±ç±»å‹ | ä½¿ç”¨åœºæ™¯ | ç‰¹ç‚¹ |
|---------|---------|------|
| LocalSandbox | å¼€å‘æµ‹è¯• | å¿«é€Ÿè¿­ä»£ï¼Œæœ¬åœ°Docker |
| AliyunSandbox | ç”Ÿäº§ç¯å¢ƒ | é˜¿é‡Œäº‘AgentBayï¼Œé«˜å®‰å…¨ |
| VolcengineSandbox | ç”Ÿäº§ç¯å¢ƒ | ç«å±±å¼•æ“ï¼Œé«˜æ€§èƒ½ |
| MockSandbox | å•å…ƒæµ‹è¯• | æ¨¡æ‹Ÿæ‰§è¡Œï¼Œæ— å‰¯ä½œç”¨ |

```go
ag, err := agent.Create(ctx, &types.AgentConfig{
    Sandbox: &types.SandboxConfig{
        Kind:    types.SandboxKindAliyun,
        WorkDir: "/workspace",
    },
}, deps)
```

### ğŸ”Œ å¤šæ¨¡å‹æ”¯æŒ

ç»Ÿä¸€çš„Provideræ¥å£ï¼Œæ”¯æŒä¸»æµå¤§æ¨¡å‹ï¼š

- **Anthropic**ï¼šClaudeç³»åˆ—ï¼ˆSonnet/Opusï¼‰
- **OpenAI**ï¼šGPT-4/GPT-3.5
- **DeepSeek**ï¼šDeepSeek-V2
- **GLM**ï¼šæ™ºè°±AI

```go
// è½»æ¾åˆ‡æ¢æ¨¡å‹
ag, err := agent.Create(ctx, &types.AgentConfig{
    ModelConfig: &types.ModelConfig{
        Provider: "anthropic",  // æˆ– "openai", "deepseek", "glm"
        Model:    "claude-sonnet-4-5",
        APIKey:   os.Getenv("ANTHROPIC_API_KEY"),
    },
}, deps)
```

### ğŸ› ï¸ ä¸°å¯Œçš„å·¥å…·ç”Ÿæ€

å†…ç½®å·¥å…·è¦†ç›–å¸¸è§åœºæ™¯ï¼š

- **æ–‡ä»¶ç³»ç»Ÿ**ï¼š`fs_read`, `fs_write`, `fs_edit`, `fs_ls`, `fs_glob`, `fs_grep`
- **å‘½ä»¤æ‰§è¡Œ**ï¼š`bash_run`
- **ä»»åŠ¡ç®¡ç†**ï¼š`todo_list`, `todo_add`, `todo_update`
- **ç½‘ç»œè¯·æ±‚**ï¼š`http_fetch`, `web_search`
- **å­Agent**ï¼š`task`ï¼ˆé€šè¿‡SubAgentMiddlewareï¼‰

åŒæ—¶æ”¯æŒï¼š

- **MCPåè®®**ï¼šé›†æˆç¬¬ä¸‰æ–¹MCP Server
- **è‡ªå®šä¹‰å·¥å…·**ï¼šå®ç°Toolæ¥å£å³å¯æ‰©å±•

### ğŸ‘¥ å¤šAgentåä½œ

æ”¯æŒä¸¤ç§åä½œæ¨¡å¼ï¼š

**1. Agent Pool**ï¼šAgentæ± ç®¡ç†

```go
pool := pool.NewPool()
pool.AddAgent("agent-1", ag1)
pool.AddAgent("agent-2", ag2)

// è·¯ç”±æ¶ˆæ¯åˆ°ç‰¹å®šAgent
pool.RouteMessage("agent-1", message)
```

**2. Agent Room**ï¼šå¤šAgentåä½œç©ºé—´

```go
room := room.NewRoom("project-room")
room.AddMember("architect", architectAgent)
room.AddMember("coder", coderAgent)

// å¹¿æ’­æ¶ˆæ¯åˆ°æ‰€æœ‰Agent
room.Broadcast(message)
```

**Scheduler**ï¼šæ™ºèƒ½ä»»åŠ¡åˆ†å‘

```go
scheduler := scheduler.NewScheduler(pool)
scheduler.Schedule(task, strategy)  // Round-robin/Random/Priority
```

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

AgentSDKé‡‡ç”¨ä¸‰å±‚æ¶æ„ï¼š

![æ¶æ„å›¾](/agentsdk/images/architecture-overview.svg)

### ç¬¬ä¸€å±‚ï¼šAgentå±‚

- **ä¸­é—´ä»¶æ ˆ**ï¼šæŒ‰ä¼˜å…ˆçº§ç»„ç»‡çš„æ´‹è‘±æ¨¡å‹
- **Provider**ï¼šå¤§æ¨¡å‹è°ƒç”¨
- **å·¥å…·æ‰§è¡Œå™¨**ï¼šå·¥å…·è°ƒç”¨å’Œç»“æœå¤„ç†

### ç¬¬äºŒå±‚ï¼šBackendå±‚

- **StateBackend**ï¼šä¸´æ—¶å†…å­˜å­˜å‚¨
- **StoreBackend**ï¼šæŒä¹…åŒ–å­˜å‚¨
- **FilesystemBackend**ï¼šçœŸå®æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
- **VectorBackend**ï¼šå‘é‡å­˜å‚¨ä¸è¯­ä¹‰è®°å¿†(å¯é€‰)

### ç¬¬ä¸‰å±‚ï¼šåŸºç¡€è®¾æ–½å±‚

- **Sandbox**ï¼šä»£ç æ‰§è¡Œç¯å¢ƒ
- **Scheduler**ï¼šä»»åŠ¡è°ƒåº¦
- **Permission**ï¼šæƒé™æ§åˆ¶

## ğŸš€ ä½¿ç”¨åœºæ™¯

AgentSDKé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š

### 1. ä¼ä¸šçº§Agentåº”ç”¨

- å®¢æˆ·æœåŠ¡æœºå™¨äºº
- æ™ºèƒ½æ–‡æ¡£å¤„ç†
- è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·
- æ•°æ®åˆ†æåŠ©æ‰‹

### 2. å¤šAgentç³»ç»Ÿ

- è½¯ä»¶å¼€å‘åä½œï¼ˆæ¶æ„å¸ˆ+ç¨‹åºå‘˜+æµ‹è¯•ï¼‰
- ç ”ç©¶åˆ†æå›¢é˜Ÿï¼ˆæ•°æ®æ”¶é›†+åˆ†æ+æŠ¥å‘Šï¼‰
- å·¥ä½œæµè‡ªåŠ¨åŒ–

### 3. å®‰å…¨æ•æ„Ÿåœºæ™¯

- é‡‘èè¡Œä¸šåº”ç”¨
- åŒ»ç–—å¥åº·é¢†åŸŸ
- æ”¿åŠ¡ç³»ç»Ÿé›†æˆ

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **å¹¶å‘èƒ½åŠ›**ï¼šæ”¯æŒ100+å¹¶å‘Agent
- **å“åº”å»¶è¿Ÿ**ï¼šæ¯«ç§’çº§äº‹ä»¶åˆ†å‘
- **å†…å­˜å ç”¨**ï¼šå•Agentçº¦10-50MB
- **æ‰©å±•æ€§**ï¼šæ°´å¹³æ‰©å±•æ”¯æŒ

## ğŸ”„ ç‰ˆæœ¬çŠ¶æ€

å½“å‰ç‰ˆæœ¬ï¼š**Alpha**

- âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæ•´
- âœ… ç”Ÿäº§å¯ç”¨çš„æ²™ç®±é›†æˆ
- âœ… å®Œå–„çš„ä¸­é—´ä»¶ç³»ç»Ÿ
- âœ… å¤šProvideræ”¯æŒ
- ğŸš§ APIå¯èƒ½æœ‰å¾®è°ƒ
- ğŸš§ æ–‡æ¡£æŒç»­å®Œå–„ä¸­

## ğŸ“š ä¸‹ä¸€æ­¥

- [å®‰è£…æŒ‡å—](./installation) - é…ç½®å¼€å‘ç¯å¢ƒ
- [å¿«é€Ÿå¼€å§‹](./quickstart) - åˆ›å»ºç¬¬ä¸€ä¸ªAgent
- [æ¶æ„è®¾è®¡](./architecture) - æ·±å…¥ç†è§£æ¶æ„
- [æ ¸å¿ƒæ¦‚å¿µ](/core-concepts/agent-lifecycle) - å­¦ä¹ å…³é”®æ¦‚å¿µ

## ğŸ¤ ç¤¾åŒº

- **GitHub**: [wordflowlab/agentsdk](https://github.com/wordflowlab/agentsdk)
- **Issues**: [æŠ¥å‘Šé—®é¢˜](https://github.com/wordflowlab/agentsdk/issues)
- **Discussions**: [å‚ä¸è®¨è®º](https://github.com/wordflowlab/agentsdk/discussions)
