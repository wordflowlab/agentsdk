---
title: å†…ç½®å·¥å…·
description: ä½¿ç”¨ AgentSDK æä¾›çš„å†…ç½®å·¥å…·ï¼šæ–‡ä»¶ç³»ç»Ÿã€Bashã€HTTPã€æœç´¢
navigation:
  icon: i-lucide-wrench
---

# å†…ç½®å·¥å…·ç¤ºä¾‹

AgentSDK æä¾›äº†ä¸€ç»„å¼€ç®±å³ç”¨çš„å†…ç½®å·¥å…·,æ— éœ€é…ç½®å³å¯ä½¿ç”¨ã€‚æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»æ¯ä¸ªå†…ç½®å·¥å…·çš„ç”¨æ³•å’Œç¤ºä¾‹ã€‚

## ğŸ“¦ å·¥å…·åˆ—è¡¨

| å·¥å…·åç§° | åŠŸèƒ½ | æ²™ç®± | ç¤ºä¾‹ |
|---------|------|------|------|
| `Read` | è¯»å–æ–‡ä»¶ | âœ… | [â†’](#read) |
| `Write` | å†™å…¥æ–‡ä»¶ | âœ… | [â†’](#write) |
| `Edit` | ç¼–è¾‘æ–‡ä»¶ | âœ… | [â†’](#edit) |
| `Glob` | æ–‡ä»¶åŒ¹é… | âœ… | [â†’](#glob) |
| `Grep` | æ–‡æœ¬æœç´¢ | âœ… | [â†’](#grep) |
| `Bash` | æ‰§è¡Œå‘½ä»¤ | âœ… | [â†’](#bash) |
| `TodoWrite` | ä»»åŠ¡ç®¡ç† | âœ… | [â†’](#todowrite) |
| `Task` | å­ä»»åŠ¡æ‰§è¡Œ | âœ… | [â†’](#task) |
| `HttpRequest` | HTTP è¯·æ±‚ | âŒ | [â†’](#httprequest) |
| `WebSearch` | ç½‘ç»œæœç´¢ | âŒ | [â†’](#websearch) |
| `Skill` | æŠ€èƒ½è°ƒç”¨ | âœ… | [â†’](#skill) |
| `SemanticSearch` | è¯­ä¹‰æœç´¢ | âœ… | [â†’](#semanticsearch) |

**æ²™ç®±è¯´æ˜ï¼š**
- âœ… - åœ¨æ²™ç®±ä¸­æ‰§è¡Œ,æ–‡ä»¶æ“ä½œé™åˆ¶åœ¨å·¥ä½œç›®å½•å†…
- âŒ - ç›´æ¥æ‰§è¡Œ,è®¿é—®å¤–éƒ¨ç½‘ç»œèµ„æº

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ³¨å†Œæ‰€æœ‰å†…ç½®å·¥å…·

```go
package main

import (
    "context"
    "fmt"
    "log"
    "os"

    "github.com/wordflowlab/agentsdk/pkg/agent"
    "github.com/wordflowlab/agentsdk/pkg/sandbox"
    "github.com/wordflowlab/agentsdk/pkg/store"
    "github.com/wordflowlab/agentsdk/pkg/tools"
    "github.com/wordflowlab/agentsdk/pkg/tools/builtin"
    "github.com/wordflowlab/agentsdk/pkg/types"
)

func main() {
    ctx := context.Background()

    // 1. åˆ›å»ºå·¥å…·æ³¨å†Œè¡¨
    toolRegistry := tools.NewRegistry()

    // 2. æ³¨å†Œæ‰€æœ‰å†…ç½®å·¥å…·
    builtin.RegisterAll(toolRegistry)

    // 3. åˆ›å»ºå…¶ä»–ä¾èµ–...
    sandboxFactory := sandbox.NewFactory()
    jsonStore, _ := store.NewJSONStore(".agentsdk")
    templateRegistry := agent.NewTemplateRegistry()

    // 4. æ³¨å†Œæ¨¡æ¿å¹¶å£°æ˜å¯ç”¨å·¥å…·
    templateRegistry.Register(&types.AgentTemplateDefinition{
        ID:    "assistant",
        Model: "claude-sonnet-4-5",
        SystemPrompt: "You are a helpful assistant with file and command execution capabilities.",
        Tools: []interface{}{
            "Read",           // æ–‡ä»¶è¯»å–
            "Write",          // æ–‡ä»¶å†™å…¥
            "Edit",           // æ–‡ä»¶ç¼–è¾‘
            "Glob",           // æ–‡ä»¶åŒ¹é…
            "Grep",           // æ–‡æœ¬æœç´¢
            "Bash",           // å‘½ä»¤æ‰§è¡Œ
            "TodoWrite",      // ä»»åŠ¡ç®¡ç†
            "Task",           // å­ä»»åŠ¡æ‰§è¡Œ
            "HttpRequest",    // HTTP è¯·æ±‚
            "WebSearch",      // ç½‘ç»œæœç´¢
            "Skill",          // æŠ€èƒ½è°ƒç”¨
            "SemanticSearch", // è¯­ä¹‰æœç´¢
        },
    })

    // 5. åˆ›å»ºä¾èµ–å¯¹è±¡
    deps := &agent.Dependencies{
        Store:            jsonStore,
        SandboxFactory:   sandboxFactory,
        ToolRegistry:     toolRegistry,
        TemplateRegistry: templateRegistry,
    }

    // 6. åˆ›å»º Agent
    config := &types.AgentConfig{
        TemplateID: "assistant",
        ModelConfig: &types.ModelConfig{
            Provider: "anthropic",
            Model:    "claude-sonnet-4-5",
            APIKey:   os.Getenv("ANTHROPIC_API_KEY"),
        },
        Sandbox: &types.SandboxConfig{
            Kind:    types.SandboxKindLocal,
            WorkDir: "./workspace",
        },
    }

    ag, err := agent.Create(ctx, config, deps)
    if err != nil {
        log.Fatalf("Failed to create agent: %v", err)
    }
    defer ag.Close()

    fmt.Printf("Agent created: %s\n", ag.ID())

    // 7. ä½¿ç”¨å†…ç½®å·¥å…·
    testBuiltinTools(ctx, ag)
}
```

## ğŸ”§ å·¥å…·è¯¦è§£

### <a id="read"></a>ğŸ“– Read - æ–‡ä»¶è¯»å–

ä»æ²™ç®±æ–‡ä»¶ç³»ç»Ÿè¯»å–æ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒåˆ†é¡µå’Œæ–‡ä»¶ç±»å‹è¯†åˆ«ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "file_path": string,   // æ–‡ä»¶è·¯å¾„ï¼ˆå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼‰
  "offset"?: number,     // èµ·å§‹è¡Œå·ï¼ˆä»1å¼€å§‹ï¼Œé»˜è®¤ä¸º1ï¼‰
  "limit"?: number       // æœ€å¤§è¯»å–è¡Œæ•°ï¼ˆé»˜è®¤è¯»å–æ•´ä¸ªæ–‡ä»¶ï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: è¯»å–æ•´ä¸ªæ–‡ä»¶
result, err := ag.Chat(ctx, "è¯·è¯»å– config.json æ–‡ä»¶çš„å†…å®¹")
// Agent å°†è°ƒç”¨: Read(file_path="/workspace/config.json")

// ç¤ºä¾‹ 2: è¯»å–éƒ¨åˆ†å†…å®¹
result, err := ag.Chat(ctx, "è¯·è¯»å– README.md çš„å‰ 10 è¡Œ")
// Agent å°†è°ƒç”¨: Read(file_path="/workspace/README.md", limit=10)

// ç¤ºä¾‹ 3: ä»æŒ‡å®šä½ç½®è¯»å–
result, err := ag.Chat(ctx, "è¯·ä»ç¬¬ 50 è¡Œå¼€å§‹è¯»å– data.txtï¼Œè¯»å– 20 è¡Œ")
// Agent å°†è°ƒç”¨: Read(file_path="/workspace/data.txt", offset=50, limit=20)
```

**è¿”å›æ ¼å¼ï¼š**

```json
{
  "ok": true,
  "file_path": "/workspace/config.json",
  "content": "æ–‡ä»¶å†…å®¹...",
  "lines": 42,
  "offset": 1,
  "limit": 0,
  "truncated": false,
  "total_lines": 42,
  "file_size": 1024,
  "file_type": "json",
  "duration_ms": 5
}
```

---

### <a id="write"></a>âœï¸ Write - æ–‡ä»¶å†™å…¥

å‘æ²™ç®±æ–‡ä»¶ç³»ç»Ÿå†™å…¥æ–‡ä»¶ï¼Œæ”¯æŒç›®å½•åˆ›å»ºã€å¤‡ä»½å’Œè¿½åŠ æ¨¡å¼ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "file_path": string,    // æ–‡ä»¶è·¯å¾„ï¼ˆå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼‰
  "content": string,      // æ–‡ä»¶å†…å®¹
  "create_dirs"?: boolean, // æ˜¯å¦è‡ªåŠ¨åˆ›å»ºçˆ¶ç›®å½•ï¼ˆé»˜è®¤trueï¼‰
  "backup"?: boolean,     // æ˜¯å¦åˆ›å»ºå¤‡ä»½ï¼ˆé»˜è®¤falseï¼‰
  "append"?: boolean      // æ˜¯å¦è¿½åŠ æ¨¡å¼ï¼ˆé»˜è®¤falseï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: åˆ›å»ºæ–°æ–‡ä»¶
result, err := ag.Chat(ctx, "è¯·åˆ›å»ºä¸€ä¸ªåä¸º hello.txt çš„æ–‡ä»¶ï¼Œå†…å®¹æ˜¯ 'Hello World'")
// Agent å°†è°ƒç”¨: Write(file_path="/workspace/hello.txt", content="Hello World")

// ç¤ºä¾‹ 2: è¿½åŠ å†…å®¹
result, err := ag.Chat(ctx, "è¯·åœ¨ log.txt æ–‡ä»¶æœ«å°¾æ·»åŠ æ–°æ—¥å¿—è¡Œ")
// Agent å°†è°ƒç”¨: Write(file_path="/workspace/log.txt", content="æ–°çš„æ—¥å¿—è¡Œ", append=true)

// ç¤ºä¾‹ 3: å¸¦å¤‡ä»½çš„è¦†ç›–
result, err := ag.Chat(ctx, "è¯·å¤‡ä»½ config.json ç„¶åæ›´æ–°é…ç½®")
// Agent å°†è°ƒç”¨: Write(file_path="/workspace/config.json", content="{...}", backup=true)
```

**è¿”å›æ ¼å¼ï¼š**

```json
{
  "ok": true,
  "file_path": "/workspace/hello.txt",
  "content": "Hello World",
  "lines": 1,
  "file_size": 11,
  "file_type": "text",
  "duration_ms": 3,
  "append_mode": false,
  "created_dirs": false,
  "file_existed": false,
  "operation": "created"
}
```

---

### <a id="edit"></a>âœï¸ Edit - æ–‡ä»¶ç¼–è¾‘

åœ¨æ–‡ä»¶ä¸­ç²¾ç¡®æŸ¥æ‰¾å¹¶æ›¿æ¢æ–‡æœ¬å†…å®¹ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "file_path": string,           // æ–‡ä»¶è·¯å¾„ï¼ˆå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼‰
  "old_string": string,          // è¦è¢«æ›¿æ¢çš„æ–‡æœ¬
  "new_string": string,          // æ–°çš„æ–‡æœ¬
  "replace_all"?: boolean,       // æ˜¯å¦æ›¿æ¢æ‰€æœ‰åŒ¹é…é¡¹ï¼ˆé»˜è®¤falseï¼‰
  "preserve_indentation"?: boolean // æ˜¯å¦ä¿æŒç¼©è¿›ï¼ˆé»˜è®¤trueï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: æ›¿æ¢å•ä¸ªå­—ç¬¦ä¸²
result, err := ag.Chat(ctx, "è¯·å°† config.json ä¸­çš„ 'debug': false æ”¹ä¸º 'debug': true")
// Agent å°†è°ƒç”¨: Edit(file_path="/workspace/config.json", old_string="'debug': false", new_string="'debug': true")

// ç¤ºä¾‹ 2: æ›¿æ¢æ‰€æœ‰åŒ¹é…é¡¹
result, err := ag.Chat(ctx, "è¯·å°†æ–‡ä»¶ä¸­æ‰€æœ‰çš„ 'TODO' æ›¿æ¢ä¸º 'DONE'")
// Agent å°†è°ƒç”¨: Edit(file_path="/workspace/notes.txt", old_string="TODO", new_string="DONE", replace_all=true)
```

**è¿”å›æ ¼å¼ï¼š**

```json
{
  "ok": true,
  "file_path": "/workspace/config.json",
  "changes_made": 1,
  "duration_ms": 8
}
```

---

### <a id="glob"></a>ğŸ” Glob - æ–‡ä»¶åŒ¹é…

ä½¿ç”¨ glob æ¨¡å¼åŒ¹é…æŸ¥æ‰¾æ–‡ä»¶ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "pattern": string,         // glob æ¨¡å¼
  "path"?: string,          // æœç´¢è·¯å¾„ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰
  "recursive"?: boolean     // æ˜¯å¦é€’å½’æœç´¢ï¼ˆé»˜è®¤trueï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: æŸ¥æ‰¾æ‰€æœ‰ JSON æ–‡ä»¶
result, err := ag.Chat(ctx, "è¯·æŸ¥æ‰¾æ‰€æœ‰ .json æ–‡ä»¶")
// Agent å°†è°ƒç”¨: Glob(pattern="**/*.json")

// ç¤ºä¾‹ 2: åœ¨ç‰¹å®šç›®å½•æŸ¥æ‰¾
result, err := ag.Chat(ctx, "è¯·åœ¨ src ç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰ Go æ–‡ä»¶")
// Agent å°†è°ƒç”¨: Glob(pattern="**/*.go", path="src")
```

---

### <a id="grep"></a>ğŸ” Grep - æ–‡æœ¬æœç´¢

ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åœ¨æ–‡ä»¶ä¸­æœç´¢æ–‡æœ¬ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "pattern": string,                    // æ­£åˆ™è¡¨è¾¾å¼
  "path"?: string,                     // æœç´¢è·¯å¾„ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰
  "glob"?: string,                     // æ–‡ä»¶è¿‡æ»¤æ¨¡å¼
  "file_type"?: string,                // æ–‡ä»¶ç±»å‹è¿‡æ»¤
  "output_mode"?: string,              // è¾“å‡ºæ¨¡å¼ï¼šcontent/files_with_matches/count
  "max_results"?: number,              // æœ€å¤§ç»“æœæ•°
  "case_sensitive"?: boolean           // æ˜¯å¦å¤§å°å†™æ•æ„Ÿï¼ˆé»˜è®¤falseï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: æœç´¢é”™è¯¯æ—¥å¿—
result, err := ag.Chat(ctx, "è¯·åœ¨æ—¥å¿—æ–‡ä»¶ä¸­æœç´¢æ‰€æœ‰ ERROR ä¿¡æ¯")
// Agent å°†è°ƒç”¨: Grep(pattern="ERROR", glob="*.log")

// ç¤ºä¾‹ 2: æŸ¥æ‰¾å‡½æ•°å®šä¹‰
result, err := ag.Chat(ctx, "è¯·æŸ¥æ‰¾æ‰€æœ‰åä¸º 'processData' çš„å‡½æ•°å®šä¹‰")
// Agent å°†è°ƒç”¨: Grep(pattern="func.*processData", file_type="go")
```

**è¿”å›æ ¼å¼ï¼š**

```json
{
  "ok": true,
  "pattern": "ERROR",
  "path": ".",
  "output_mode": "content",
  "matches": [
    {
      "file": "app.log",
      "line_number": 42,
      "line": "2023-10-01 10:30:15 ERROR: Database connection failed"
    }
  ],
  "total_matches": 5,
  "files_scanned": 3,
  "duration_ms": 15
}
```

---

### <a id="bash"></a>âš¡ Bash - å‘½ä»¤æ‰§è¡Œ

åœ¨æ²™ç®±ç¯å¢ƒä¸­æ‰§è¡Œ Bash å‘½ä»¤ï¼Œæ”¯æŒæŒä¹…åŒ–ä¼šè¯ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "command": string,                // è¦æ‰§è¡Œçš„å‘½ä»¤
  "timeout"?: number,               // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼Œé»˜è®¤120000ï¼‰
  "working_dir"?: string,           // å·¥ä½œç›®å½•
  "shell"?: string,                 // shellç±»å‹ï¼ˆbash/sh/zshï¼Œé»˜è®¤bashï¼‰
  "background"?: boolean,           // æ˜¯å¦åå°è¿è¡Œï¼ˆé»˜è®¤falseï¼‰
  "environment"?: object,           // ç¯å¢ƒå˜é‡
  "capture_output"?: boolean        // æ˜¯å¦æ•è·è¾“å‡ºï¼ˆé»˜è®¤trueï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: åˆ—å‡ºæ–‡ä»¶
result, err := ag.Chat(ctx, "è¯·åˆ—å‡ºå½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶")
// Agent å°†è°ƒç”¨: Bash(command="ls -la")

// ç¤ºä¾‹ 2: å¸¦ç¯å¢ƒå˜é‡çš„å‘½ä»¤
result, err := ag.Chat(ctx, "è¯·è®¾ç½®ç¯å¢ƒå˜é‡ DEBUG=true å¹¶è¿è¡Œåº”ç”¨")
// Agent å°†è°ƒç”¨: Bash(command="npm start", environment={"DEBUG": "true"})
```

**è¿”å›æ ¼å¼ï¼š**

```json
{
  "ok": true,
  "command": "ls -la",
  "exit_code": 0,
  "success": true,
  "stdout": "total 16\ndrwxr-xr-x  4 user  group   128 Oct  1 10:30 .\n...",
  "stderr": "",
  "duration_ms": 42,
  "background": false,
  "shell_type": "bash"
}
```

---

### <a id="todowrite"></a>ğŸ“‹ TodoWrite - ä»»åŠ¡ç®¡ç†

åˆ›å»ºå’Œç®¡ç†å¾…åŠäº‹é¡¹åˆ—è¡¨ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "action": string,               // æ“ä½œç±»å‹ï¼šcreate/update/delete/list
  "todos"?: array,               // ä»»åŠ¡åˆ—è¡¨ï¼ˆç”¨äºcreate/updateï¼‰
  "todo_id"?: string,             // ä»»åŠ¡IDï¼ˆç”¨äºupdate/deleteï¼‰
  "storage_path"?: string        // å­˜å‚¨è·¯å¾„ï¼ˆé»˜è®¤./todos.jsonï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: åˆ›å»ºä»»åŠ¡åˆ—è¡¨
result, err := ag.Chat(ctx, "è¯·åˆ›å»ºä¸€ä¸ªåŒ…å«å¼€å‘ä»»åŠ¡çš„ä»»åŠ¡åˆ—è¡¨")
// Agent å°†è°ƒç”¨: TodoWrite(action="create", todos=[{"content": "å®ç°ç”¨æˆ·è®¤è¯", "status": "pending"}])
```

---

### <a id="task"></a>ğŸš€ Task - å­ä»»åŠ¡æ‰§è¡Œ

å¯åŠ¨ä¸“é—¨çš„å­ä»£ç†æ¥å¤„ç†å¤æ‚ä»»åŠ¡ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "subagent_type": string,         // å­ä»£ç†ç±»å‹
  "prompt": string,               // ä»»åŠ¡æè¿°
  "context"?: object,             // ä¸Šä¸‹æ–‡ä¿¡æ¯
  "timeout_seconds"?: number      // è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: ä½¿ç”¨ä¸“é—¨çš„ä»£ç å®¡æŸ¥å­ä»£ç†
result, err := ag.Chat(ctx, "è¯·å¯åŠ¨ä»£ç å®¡æŸ¥å­ä»£ç†æ¥æ£€æŸ¥è¿™æ®µä»£ç ")
// Agent å°†è°ƒç”¨: Task(subagent_type="code-reviewer", prompt="è¯·æ£€æŸ¥è¿™æ®µä»£ç çš„è´¨é‡")
```

---

### <a id="httprequest"></a>ğŸŒ HttpRequest - HTTP è¯·æ±‚

å‘é€ HTTP è¯·æ±‚åˆ°å¤–éƒ¨ APIï¼Œæ”¯æŒå¤šç§è¯·æ±‚æ–¹æ³•å’Œè®¤è¯ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "url": string,                    // è¯·æ±‚ URL
  "method"?: string,                // HTTP æ–¹æ³•ï¼ˆé»˜è®¤GETï¼‰
  "headers"?: object,               // è¯·æ±‚å¤´
  "body"?: string,                  // è¯·æ±‚ä½“
  "timeout_seconds"?: number        // è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼Œé»˜è®¤30ï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: GET è¯·æ±‚
result, err := ag.Chat(ctx, "è¯·è·å– GitHub ç”¨æˆ·ä¿¡æ¯")
// Agent å°†è°ƒç”¨: HttpRequest(url="https://api.github.com/users/octocat", method="GET")

// ç¤ºä¾‹ 2: POST è¯·æ±‚
result, err := ag.Chat(ctx, "è¯·å‘ API å‘é€ç”¨æˆ·åˆ›å»ºè¯·æ±‚")
// Agent å°†è°ƒç”¨: HttpRequest(
//   url="https://api.example.com/users",
//   method="POST",
//   headers={"Content-Type": "application/json"},
//   body='{"name": "Alice", "email": "alice@example.com"}'
// )
```

**è¿”å›æ ¼å¼ï¼š**

```json
{
  "ok": true,
  "status_code": 200,
  "headers": {"Content-Type": "application/json"},
  "body": "{...}",
  "duration_ms": 156
}
```

---

### <a id="websearch"></a>ğŸ” WebSearch - ç½‘ç»œæœç´¢

ä½¿ç”¨æœç´¢å¼•æ“æŸ¥è¯¢ä¿¡æ¯ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "query": string,                 // æœç´¢æŸ¥è¯¢
  "max_results"?: number,          // æœ€å¤§ç»“æœæ•°ï¼ˆé»˜è®¤10ï¼‰
  "safe_search"?: string           // å®‰å…¨æœç´¢çº§åˆ«ï¼ˆé»˜è®¤moderateï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: åŸºæœ¬æœç´¢
result, err := ag.Chat(ctx, "è¯·æœç´¢ 'Go è¯­è¨€å¹¶å‘ç¼–ç¨‹'")
// Agent å°†è°ƒç”¨: WebSearch(query="Go è¯­è¨€å¹¶å‘ç¼–ç¨‹")
```

**è¿”å›æ ¼å¼ï¼š**

```json
{
  "ok": true,
  "results": [
    {
      "title": "Go å¹¶å‘ç¼–ç¨‹æŒ‡å—",
      "url": "https://example.com/go-concurrency",
      "snippet": "Go è¯­è¨€çš„å¹¶å‘æ¨¡å‹åŸºäº CSP...",
      "position": 1
    }
  ],
  "total_results": 42,
  "search_time": 0.45
}
```

---

### <a id="skill"></a>ğŸ› ï¸ Skill - æŠ€èƒ½è°ƒç”¨

æ‰§è¡Œå¤–éƒ¨æŠ€èƒ½è„šæœ¬æˆ–ç¨‹åºã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "skill": string,                 // æŠ€èƒ½åç§°
  "parameters"?: object,           // æŠ€èƒ½å‚æ•°
  "context"?: object,              // æ‰§è¡Œä¸Šä¸‹æ–‡
  "timeout_seconds"?: number       // è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: è°ƒç”¨ PDF å¤„ç†æŠ€èƒ½
result, err := ag.Chat(ctx, "è¯·ä½¿ç”¨ pdf-to-markdown æŠ€èƒ½è½¬æ¢ PDF æ–‡ä»¶")
// Agent å°†è°ƒç”¨: Skill(skill="pdf-to-markdown", parameters={"input": "document.pdf", "output": "document.md"})
```

---

### <a id="semanticsearch"></a>ğŸ§  SemanticSearch - è¯­ä¹‰æœç´¢

åŸºäºå‘é‡ç›¸ä¼¼åº¦çš„è¯­ä¹‰æœç´¢ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```typescript
{
  "query": string,                 // æŸ¥è¯¢æ–‡æœ¬
  "top_k"?: number,               // è¿”å›ç»“æœæ•°ï¼ˆé»˜è®¤5ï¼‰
  "metadata"?: object             // å…ƒæ•°æ®è¿‡æ»¤æ¡ä»¶
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```go
// ç¤ºä¾‹ 1: è¯­ä¹‰æœç´¢æ–‡æ¡£
result, err := ag.Chat(ctx, "è¯·è¯­ä¹‰æœç´¢å…³äºæ•°æ®åº“ä¼˜åŒ–çš„æ–‡æ¡£")
// Agent å°†è°ƒç”¨: SemanticSearch(query="æ•°æ®åº“ä¼˜åŒ–", top_k=5)
```

## ğŸ¬ å®Œæ•´ç¤ºä¾‹

### æ–‡ä»¶ç®¡ç†åŠ©æ‰‹

```go
func testFileManagement(ctx context.Context, ag *agent.Agent) {
    fmt.Println("=== æ–‡ä»¶ç®¡ç†ç¤ºä¾‹ ===")

    // 1. åˆ›å»ºç›®å½•ç»“æ„
    ag.Chat(ctx, "è¯·åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼šdata/input, data/output, logs")

    // 2. åˆ›å»ºé…ç½®æ–‡ä»¶
    ag.Chat(ctx, `
        è¯·åˆ›å»º config.json æ–‡ä»¶ï¼š
        {
          "app": "demo",
          "version": "1.0.0",
          "debug": true
        }
    `)

    // 3. åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶
    ag.Chat(ctx, "è¯·åˆ—å‡ºå½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•")

    // 4. è¯»å–é…ç½®
    ag.Chat(ctx, "è¯·è¯»å– config.json å¹¶å‘Šè¯‰æˆ‘ debug æ˜¯å¦å¯ç”¨")

    // 5. æ›´æ–°é…ç½®
    ag.Chat(ctx, "è¯·å°† config.json çš„ version æ”¹ä¸º 1.1.0")
}
```

### æ—¥å¿—åˆ†æåŠ©æ‰‹

```go
func testLogAnalysis(ctx context.Context, ag *agent.Agent) {
    fmt.Println("=== æ—¥å¿—åˆ†æç¤ºä¾‹ ===")

    // 1. ç»Ÿè®¡é”™è¯¯æ•°
    ag.Chat(ctx, "è¯·ç»Ÿè®¡ app.log ä¸­æœ‰å¤šå°‘ ERROR çº§åˆ«çš„æ—¥å¿—")

    // 2. æ‰¾å‡ºæœ€å¸¸è§çš„é”™è¯¯
    ag.Chat(ctx, "è¯·æ‰¾å‡º app.log ä¸­å‡ºç°æœ€å¤šçš„ 10 ç§é”™è¯¯")

    // 3. æå–ç‰¹å®šæ—¶é—´æ®µçš„æ—¥å¿—
    ag.Chat(ctx, "è¯·æå–ä»Šå¤© 14:00-15:00 ä¹‹é—´çš„æ‰€æœ‰æ—¥å¿—åˆ° today.log")

    // 4. ç”ŸæˆæŠ¥å‘Š
    ag.Chat(ctx, "è¯·åˆ†ææ—¥å¿—å¹¶ç”ŸæˆæŠ¥å‘Šåˆ° report.mdï¼ŒåŒ…å«é”™è¯¯ç»Ÿè®¡å’Œå…³é”®å‘ç°")
}
```

### API é›†æˆåŠ©æ‰‹

```go
func testAPIIntegration(ctx context.Context, ag *agent.Agent) {
    fmt.Println("=== API é›†æˆç¤ºä¾‹ ===")

    // 1. è·å–ç”¨æˆ·ä¿¡æ¯
    ag.Chat(ctx, "è¯·ä» https://api.github.com/users/octocat è·å–ç”¨æˆ·ä¿¡æ¯")

    // 2. æœç´¢ç›¸å…³é¡¹ç›®
    ag.Chat(ctx, "è¯·æœç´¢ GitHub ä¸Šçš„ 'go agent framework' é¡¹ç›®")

    // 3. ä¿å­˜ç»“æœ
    ag.Chat(ctx, "è¯·å°†æœç´¢ç»“æœä¿å­˜åˆ° projects.json")

    // 4. ç”ŸæˆæŠ¥å‘Š
    ag.Chat(ctx, "è¯·æ ¹æ®ä¿å­˜çš„é¡¹ç›®ä¿¡æ¯ï¼Œç”Ÿæˆä¸€ä¸ª Markdown æ ¼å¼çš„é¡¹ç›®åˆ—è¡¨")
}
```

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•åªå¯ç”¨éƒ¨åˆ†å†…ç½®å·¥å…·ï¼Ÿ

åªåœ¨æ¨¡æ¿ä¸­å£°æ˜éœ€è¦çš„å·¥å…·ï¼š

```go
templateRegistry.Register(&types.AgentTemplateDefinition{
    ID:    "file-only-assistant",
    Tools: []interface{}{
        "Read",   // åªå¯ç”¨æ–‡ä»¶è¯»å–
        "Write",  // åªå¯ç”¨æ–‡ä»¶å†™å…¥
    },
})
```

### Q: å·¥å…·è°ƒç”¨ä¼šè®¡å…¥ Token ä½¿ç”¨å—ï¼Ÿ

æ˜¯çš„ã€‚å·¥å…·è°ƒç”¨çš„è¾“å…¥å’Œè¾“å‡ºéƒ½ä¼šè®¡å…¥ Token ä½¿ç”¨ã€‚å»ºè®®ï¼š
- è¯»å–å¤§æ–‡ä»¶æ—¶ä½¿ç”¨ offset å’Œ limit
- é¿å…é¢‘ç¹è°ƒç”¨åŒä¸€å·¥å…·
- ä½¿ç”¨ Grep å·¥å…·è¿›è¡Œæ–‡æœ¬æœç´¢è€Œä¸æ˜¯è¯»å–å¤§æ–‡ä»¶åæ‰‹åŠ¨æœç´¢
- ä½¿ç”¨ Glob å·¥å…·æŸ¥æ‰¾æ–‡ä»¶è€Œä¸æ˜¯ç”¨ Bash å‘½ä»¤

### Q: å¦‚ä½•é™åˆ¶æ–‡ä»¶è®¿é—®èŒƒå›´ï¼Ÿ

é€šè¿‡æ²™ç®±é…ç½®é™åˆ¶å·¥ä½œç›®å½•ï¼š

```go
config := &types.AgentConfig{
    Sandbox: &types.SandboxConfig{
        Kind:    types.SandboxKindLocal,
        WorkDir: "./restricted-workspace",  // åªèƒ½è®¿é—®è¿™ä¸ªç›®å½•
    },
}
```

### Q: å¯ä»¥ç¦ç”¨æŸäº›å±é™©å‘½ä»¤å—ï¼Ÿ

å¯ä»¥ã€‚Bash å·¥å…·å†…ç½®äº†å®‰å…¨æ£€æŸ¥ï¼Œä¼šè‡ªåŠ¨é˜»æ­¢å±é™©å‘½ä»¤å¦‚ï¼š
- `rm -rf /` - ç³»ç»Ÿåˆ é™¤å‘½ä»¤
- `sudo rm` - éœ€è¦ç®¡ç†å‘˜æƒé™çš„åˆ é™¤
- `dd if=/dev/zero` - ç£ç›˜ç ´åå‘½ä»¤
- `format` / `fdisk` - ç£ç›˜æ ¼å¼åŒ–å‘½ä»¤

ä¹Ÿå¯ä»¥é€šè¿‡æ²™ç®±é…ç½®è¿›ä¸€æ­¥é™åˆ¶ï¼š

```go
config := &types.SandboxConfig{
    Kind:    types.SandboxKindLocal,
    WorkDir: "./workspace",
    BlockedCommands: []string{
        "rm -rf",
        "dd",
        "mkfs",
    },
}
```

### Q: æ–°çš„å·¥å…·åç§°æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ

æ–°çš„å·¥å…·åç§°æ›´åŠ ç›´è§‚å’Œä¸€è‡´ï¼š

1. **æ›´ç®€æ´**: `Read` æ¯” `Read` æ›´ç®€æ´
2. **æ›´ç›´è§‚**: `Write` æ¯” `Write` æ›´ç›´è§‚
3. **æ›´ä¸€è‡´**: æ‰€æœ‰å·¥å…·éƒ½ä½¿ç”¨ PascalCase å‘½å
4. **æ›´å®Œæ•´**: æ–°å¢äº† `Edit`ã€`Glob`ã€`Grep`ã€`TodoWrite`ã€`Task`ã€`Skill`ã€`SemanticSearch` ç­‰å·¥å…·
5. **åŠŸèƒ½æ›´å¼ºå¤§**: æ¯ä¸ªå·¥å…·éƒ½æœ‰æ›´å¤šçš„å‚æ•°é€‰é¡¹å’Œæ›´å¥½çš„é”™è¯¯å¤„ç†

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å·¥å…·ç³»ç»Ÿæ¦‚è§ˆ](/examples/tools) - å·¥å…·ç³»ç»Ÿæ¶æ„
- [MCP å·¥å…·](/examples/tools/mcp) - é›†æˆ MCP åè®®
- [è‡ªå®šä¹‰å·¥å…·](/examples/tools/custom) - åˆ›å»ºè‡ªå®šä¹‰å·¥å…·
- [Sandbox é…ç½®](/core-concepts/sandbox) - æ²™ç®±è¯¦ç»†é…ç½®
